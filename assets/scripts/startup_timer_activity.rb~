require 'ruboto'

ruboto_import_widgets :Button, :LinearLayout, :TextView

$activity.handle_create do |bundle|
  setTitle 'Ruboto startup timer'

  setup_content do
    linear_layout :orientation => LinearLayout::VERTICAL do
      @text_view = text_view :text => "", :width => :fill_parent, :id => 42
      # @button = button :text => 'Send report', :width => :fill_parent, :id => 43
    end
  end

  handle_click do |view|
    if view == @button
      @text_view.setText 'Report NOT sent.  Not implemented!'
      toast 'Report NOT sent.  Not implemented!'
    end
  end

  handle_resume do
    $package.StartupTimerActivity.stop ||= java.lang.System.currentTimeMillis
    @text_view.text = "#{$package.StartupTimerActivity.stop} - #{$package.StartupTimerActivity::START} Startup took #{$package.StartupTimerActivity.stop - $package.StartupTimerActivity::START}ms"
  end

end
